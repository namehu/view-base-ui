import{Component as e,Prop as t,Watch as n,Vue as i}from"vue-property-decorator";import{Checkbox as l}from"view-design";function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?f(e):t}function b(e,t,n,i){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}function A(e,t,n,i,l){var s={};return Object.keys(i).forEach((function(e){s[e]=i[e]})),s.enumerable=!!s.enumerable,s.configurable=!!s.configurable,("value"in s||s.initializer)&&(s.writable=!0),s=n.slice().reverse().reduce((function(n,i){return i(e,t,n)||n}),s),l&&void 0!==s.initializer&&(s.value=s.initializer?s.initializer.call(l):void 0,s.initializer=void 0),void 0===s.initializer&&(Object.defineProperty(e,t,s),s=null),s}var g,m,x,C,y,k,w,E,B,L,S,_,O,z,T,R,P,$=(g=e({name:"VMultipleSelect"}),m=t({type:Array,default:function(){return[]}}),x=t({type:Array,default:function(){return[]}}),C=t({type:String,default:"请选择"}),y=t({type:Boolean,default:!1}),k=t({type:Boolean,default:!1}),w=t({type:Boolean,default:!1}),E=n("options",{immediate:!0}),B=n("value",{deep:!0}),g((_=A((S=function(e){function t(){var e,n;s(this,t);for(var i=arguments.length,l=new Array(i),r=0;r<i;r++)l[r]=arguments[r];return b(n=v(this,(e=u(t)).call.apply(e,[this].concat(l))),"value",_,f(n)),b(n,"options",O,f(n)),b(n,"placeholder",z,f(n)),b(n,"inverse",T,f(n)),b(n,"filter",R,f(n)),b(n,"showSelect",P,f(n)),n.searchText="",n.onlySelected=!1,n.localOptions=[],n.visible=!1,n}return h(t,i),a(t,[{key:"optionsHandler",value:function(e){var t=this;this.localOptions=e.map((function(e){return d({},e,{checked:-1!==t.value.indexOf(e.value)})}))}},{key:"valueHandler",value:function(){var e=this;this.localOptions=this.options.map((function(t){return d({},t,{checked:-1!==e.value.indexOf(t.value)})}))}},{key:"mounted",value:function(){document.body.addEventListener("click",this.clickHandler)}},{key:"beforeDestroy",value:function(){document.body.removeEventListener("click",this.clickHandler)}},{key:"toogleVisible",value:function(){this.visible=!this.visible}},{key:"onSearchChange",value:function(e){}},{key:"onOnlySelectedChange",value:function(e){}},{key:"onClickInverse",value:function(){var e=this;this.filterOptions.length&&(this.filterOptions.forEach((function(t){e.$set(t,"checked",!t.checked)})),this.emitChange())}},{key:"onSelectedAllChange",value:function(e){var t=this;this.filterOptions.forEach((function(n){t.$set(n,"checked",e)})),this.emitChange()}},{key:"onOptionItemCheckChange",value:function(e){this.emitChange()}},{key:"clickHandler",value:function(e){this.$el.contains(e.target)||this.visible&&(this.visible=!this.visible)}},{key:"emitChange",value:function(){var e=this.localOptions.filter((function(e){return e.checked})).map((function(e){return e.value}));this.$emit("input",e),this.$emit("on-change",e)}},{key:"multipleSelectClass",get:function(){return{"vb-multiple-select":!0,"select-visible":this.visible}}},{key:"multipleSelectDropDownClass",get:function(){return{"select-dropdown":!0}}},{key:"allSelected",get:function(){return this.filterOptions.filter((function(e){return e.checked})).length===this.filterOptions.length}},{key:"allIndeterminate",get:function(){var e=this.filterOptions.length;return e&&this.filterSelectOptionLen>0&&this.filterSelectOptionLen<e}},{key:"filterSelectOptionLen",get:function(){return this.filterOptions.filter((function(e){return e.checked})).length}},{key:"filterOptions",get:function(){var e=this,t=this.localOptions;return this.searchText&&(t=t.filter((function(t){return-1!==t.label.indexOf(e.searchText)}))),this.onlySelected&&(t=t.filter((function(e){return e.checked}))),t}},{key:"selectedValues",get:function(){var e=this;return this.options.filter((function(t){return e.value.includes(t.value)}))}}]),t}()).prototype,"value",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),O=A(S.prototype,"options",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=A(S.prototype,"placeholder",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T=A(S.prototype,"inverse",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),R=A(S.prototype,"filter",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P=A(S.prototype,"showSelect",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A(S.prototype,"optionsHandler",[E],Object.getOwnPropertyDescriptor(S.prototype,"optionsHandler"),S.prototype),A(S.prototype,"valueHandler",[B],Object.getOwnPropertyDescriptor(S.prototype,"valueHandler"),S.prototype),L=S))||L);function H(e,t,n,i,l,s,r,a,o,c){"boolean"!=typeof r&&(o=a,a=r,r=!1);const d="function"==typeof n?n.options:n;let h;if(e&&e.render&&(d.render=e.render,d.staticRenderFns=e.staticRenderFns,d._compiled=!0,l&&(d.functional=!0)),i&&(d._scopeId=i),s?(h=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),t&&t.call(this,o(e)),e&&e._registeredComponents&&e._registeredComponents.add(s)},d._ssrRegister=h):t&&(h=r?function(e){t.call(this,c(e,this.$root.$options.shadowRoot))}:function(e){t.call(this,a(e))}),h)if(d.functional){const e=d.render;d.render=function(t,n){return h.call(n),e(t,n)}}else{const e=d.beforeCreate;d.beforeCreate=e?[].concat(e,h):[h]}return n}const M="undefined"!=typeof navigator&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());function N(e){return(e,t)=>function(e,t){const n=M?t.media||"default":e,i=F[n]||(F[n]={ids:new Set,styles:[]});if(!i.ids.has(e)){i.ids.add(e);let n=t.source;if(t.map&&(n+="\n/*# sourceURL="+t.map.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(t.map))))+" */"),i.element||(i.element=document.createElement("style"),i.element.type="text/css",t.media&&i.element.setAttribute("media",t.media),void 0===I&&(I=document.head||document.getElementsByTagName("head")[0]),I.appendChild(i.element)),"styleSheet"in i.element)i.styles.push(n),i.element.styleSheet.cssText=i.styles.filter(Boolean).join("\n");else{const e=i.ids.size-1,t=document.createTextNode(n),l=i.element.childNodes;l[e]&&i.element.removeChild(l[e]),l.length?i.element.insertBefore(t,l[e]):i.element.appendChild(t)}}}(e,t)}let I;const F={};var K=$,j=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:e.multipleSelectClass},[n("div",{staticClass:"select-selection",on:{click:e.toogleVisible}},[n("div",{staticClass:"selection-content"},[e.value.length?n("span",{staticClass:"selection-selected-label"},[e._v(e._s(e.selectedValues.map((function(e){return e.label})).join(",")))]):n("span",{staticClass:"selection-placeholder"},[e._v(e._s(e.placeholder))])]),e._v(" "),n("Icon",{staticClass:"select-arrow",attrs:{type:"ios-arrow-down"}})],1),e._v(" "),n("transition",{attrs:{name:"slide-up"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"select-dropdown",on:{click:function(e){e.stopPropagation()}}},[n("div",{staticClass:"select-operation"},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.filter,expression:"filter"}],staticClass:"search-input"},[n("Input",{staticClass:"input",attrs:{size:"small",placeholder:"输入搜索"},on:{"on-change":e.onSearchChange},model:{value:e.searchText,callback:function(t){e.searchText=t},expression:"searchText"}})],1),e._v(" "),n("div",{staticClass:"operation"},[n("Checkbox",{attrs:{value:e.allSelected,indeterminate:e.allIndeterminate,disabled:!e.filterOptions.length},on:{"on-change":e.onSelectedAllChange}},[e._v("全选")]),e._v(" "),n("span",{directives:[{name:"show",rawName:"v-show",value:e.inverse,expression:"inverse"}],staticClass:"inverse",on:{click:e.onClickInverse}},[e._v("反选")]),e._v(" "),e.showSelect?n("Checkbox",{staticClass:"select-filter",attrs:{disabled:!e.localOptions.length},on:{"on-change":e.onOnlySelectedChange},model:{value:e.onlySelected,callback:function(t){e.onlySelected=t},expression:"onlySelected"}},[e._v("只看已选")]):e._e(),e._v(" "),n("span",{staticClass:"option-len"},[e._v("\n            "+e._s(e.value.length)+"/"+e._s(e.options.length)+"\n          ")])],1)]),e._v(" "),n("div",{staticClass:"select-dropdown-list"},[e.filterOptions.length?n("ul",e._l(e.filterOptions,(function(t,i){return n("li",{key:i},[n("Checkbox",{on:{"on-change":e.onOptionItemCheckChange},model:{value:t.checked,callback:function(n){e.$set(t,"checked",n)},expression:"item.checked"}},[e._v(e._s(t.label))])],1)})),0):n("div",{staticClass:"no-data"},[e._v("没有数据")])])])])],1)};j._withStripped=!0;var D,V,Y,U,W,Z,X,q,Q,J,G,ee,te,ne,ie,le=H({render:j,staticRenderFns:[]},(function(e){e&&e("data-v-01b1f9fb_0",{source:".vb-multiple-select[data-v-01b1f9fb] {\n  position: relative;\n}\n.vb-multiple-select.select-visible .select-selection[data-v-01b1f9fb] {\n  border-color: #57a3f3;\n  outline: 0;\n  box-shadow: 0 0 0 2px rgba(45, 140, 240, 0.2);\n}\n.vb-multiple-select.select-visible .select-selection .select-arrow[data-v-01b1f9fb] {\n  transform: translateY(-50%) rotate(180deg);\n}\n.vb-multiple-select .select-selection[data-v-01b1f9fb] {\n  position: relative;\n  height: 32px;\n  display: block;\n  box-sizing: border-box;\n  outline: 0;\n  user-select: none;\n  cursor: pointer;\n  position: relative;\n  background-color: #fff;\n  border-radius: 4px;\n  border: 1px solid #dcdee2;\n  transition: all 0.2s ease-in-out;\n}\n.vb-multiple-select .select-selection .selection-content[data-v-01b1f9fb] {\n  display: flex;\n  justify-content: space-between;\n  height: 30px;\n  line-height: 30px;\n  font-size: 14px;\n  padding-left: 8px;\n  padding-right: 24px;\n  color: #c5c8ce;\n}\n.vb-multiple-select .select-selection .selection-content .selection-selected-label[data-v-01b1f9fb] {\n  flex: 1;\n  width: 0;\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  color: #515a6e;\n}\n.vb-multiple-select .select-selection .select-arrow[data-v-01b1f9fb] {\n  position: absolute;\n  top: 50%;\n  right: 8px;\n  line-height: 1;\n  transform: translateY(-50%);\n  font-size: 14px;\n  color: #808695;\n  transition: all 0.2s ease-in-out;\n}\n.vb-multiple-select .select-dropdown[data-v-01b1f9fb] {\n  position: absolute;\n  top: 35px;\n  left: 0;\n  z-index: 900;\n  width: 100%;\n  max-width: 300px;\n  margin: 5px 0;\n  box-sizing: border-box;\n  background-color: #fff;\n  box-shadow: 0 1px 6px rgba(0, 0, 0, 0.2);\n  border-radius: 4px;\n}\n.vb-multiple-select .select-dropdown > .select-operation[data-v-01b1f9fb] {\n  padding: 5px;\n  border-bottom: 1px solid #e4e4e4;\n  background: #f8f8f9;\n}\n.vb-multiple-select .select-dropdown > .select-operation .search-input[data-v-01b1f9fb] {\n  display: flex;\n  align-items: center;\n  margin-bottom: 5px;\n}\n.vb-multiple-select .select-dropdown > .select-operation .operation .inverse[data-v-01b1f9fb] {\n  margin-left: 10px;\n  cursor: pointer;\n}\n.vb-multiple-select .select-dropdown > .select-operation .operation .inverse[data-v-01b1f9fb]:hover {\n  color: #57a3f3;\n}\n.vb-multiple-select .select-dropdown > .select-operation .operation .option-len[data-v-01b1f9fb] {\n  float: right;\n  color: #666;\n}\n.vb-multiple-select .select-dropdown > .select-dropdown-list[data-v-01b1f9fb] {\n  overflow: auto;\n  max-height: 200px;\n}\n.vb-multiple-select .select-dropdown > .select-dropdown-list li[data-v-01b1f9fb] {\n  height: 30px;\n  line-height: 30px;\n  padding: 0 5px;\n  cursor: pointer;\n}\n.vb-multiple-select .select-dropdown > .select-dropdown-list li[data-v-01b1f9fb]:hover {\n  background: #f5f5f5;\n}\n.vb-multiple-select .select-dropdown > .select-dropdown-list li[data-v-01b1f9fb]  .ivu-checkbox-wrapper {\n  display: block;\n}\n.vb-multiple-select .select-dropdown > .select-dropdown-list .no-data[data-v-01b1f9fb] {\n  height: 100px;\n  line-height: 100px;\n  text-align: center;\n  color: #808695;\n}\n\n/*# sourceMappingURL=v-multiple-select.vue.map */",map:{version:3,sources:["v-multiple-select.vue","/Users/huxiang/code/github/view-base-ui/src/components/v-multiple-select/v-multiple-select.vue"],names:[],mappings:"AAAA;ECCA,kBAAA;ADCA;AACA;EACE,qBAAqB;EACrB,UAAU;EACV,6CAA6C;AAC/C;AACA;EACE,0CAA0C;AAC5C;AACA;EACE,kBAAkB;EAClB,YAAY;EACZ,cAAc;EACd,sBAAsB;EACtB,UAAU;EACV,iBAAiB;EACjB,eAAe;EACf,kBAAkB;EAClB,sBAAsB;EACtB,kBAAkB;EAClB,yBAAyB;EACzB,gCAAgC;AAClC;AACA;EACE,aAAa;EACb,8BAA8B;EAC9B,YAAY;EACZ,iBAAiB;EACjB,eAAe;EACf,iBAAiB;EACjB,mBAAmB;EACnB,cAAc;AAChB;AACA;EACE,OAAO;EACP,QAAQ;EACR,gBAAgB;EAChB,mBAAmB;EACnB,uBAAuB;EACvB,cAAc;AAChB;AACA;EACE,kBAAkB;EAClB,QAAQ;EACR,UAAU;EACV,cAAc;EACd,2BAA2B;EAC3B,eAAe;EACf,cAAc;EACd,gCAAgC;AAClC;AACA;EACE,kBAAkB;EAClB,SAAS;EACT,OAAO;EACP,YAAY;EACZ,WAAW;EACX,gBAAgB;EAChB,aAAa;EACb,sBAAsB;EACtB,sBAAsB;EACtB,wCAAwC;EACxC,kBAAkB;AACpB;AACA;EACE,YAAY;EACZ,gCAAgC;EAChC,mBAAmB;AACrB;AACA;EACE,aAAa;EACb,mBAAmB;EACnB,kBAAkB;AACpB;AACA;EACE,iBAAiB;EACjB,eAAe;AACjB;AACA;EACE,cAAc;AAChB;AACA;EACE,YAAY;EACZ,WAAW;AACb;AACA;EACE,cAAc;EACd,iBAAiB;AACnB;AACA;EACE,YAAY;EACZ,iBAAiB;EACjB,cAAc;EACd,eAAe;AACjB;AACA;EACE,mBAAmB;AACrB;AACA;EACE,cAAc;AAChB;AACA;EACE,aAAa;EACb,kBAAkB;EAClB,kBAAkB;EAClB,cAAc;AAChB;;AAEA,gDAAgD",file:"v-multiple-select.vue",sourcesContent:[".vb-multiple-select {\n  position: relative;\n}\n.vb-multiple-select.select-visible .select-selection {\n  border-color: #57a3f3;\n  outline: 0;\n  box-shadow: 0 0 0 2px rgba(45, 140, 240, 0.2);\n}\n.vb-multiple-select.select-visible .select-selection .select-arrow {\n  transform: translateY(-50%) rotate(180deg);\n}\n.vb-multiple-select .select-selection {\n  position: relative;\n  height: 32px;\n  display: block;\n  box-sizing: border-box;\n  outline: 0;\n  user-select: none;\n  cursor: pointer;\n  position: relative;\n  background-color: #fff;\n  border-radius: 4px;\n  border: 1px solid #dcdee2;\n  transition: all 0.2s ease-in-out;\n}\n.vb-multiple-select .select-selection .selection-content {\n  display: flex;\n  justify-content: space-between;\n  height: 30px;\n  line-height: 30px;\n  font-size: 14px;\n  padding-left: 8px;\n  padding-right: 24px;\n  color: #c5c8ce;\n}\n.vb-multiple-select .select-selection .selection-content .selection-selected-label {\n  flex: 1;\n  width: 0;\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  color: #515a6e;\n}\n.vb-multiple-select .select-selection .select-arrow {\n  position: absolute;\n  top: 50%;\n  right: 8px;\n  line-height: 1;\n  transform: translateY(-50%);\n  font-size: 14px;\n  color: #808695;\n  transition: all 0.2s ease-in-out;\n}\n.vb-multiple-select .select-dropdown {\n  position: absolute;\n  top: 35px;\n  left: 0;\n  z-index: 900;\n  width: 100%;\n  max-width: 300px;\n  margin: 5px 0;\n  box-sizing: border-box;\n  background-color: #fff;\n  box-shadow: 0 1px 6px rgba(0, 0, 0, 0.2);\n  border-radius: 4px;\n}\n.vb-multiple-select .select-dropdown > .select-operation {\n  padding: 5px;\n  border-bottom: 1px solid #e4e4e4;\n  background: #f8f8f9;\n}\n.vb-multiple-select .select-dropdown > .select-operation .search-input {\n  display: flex;\n  align-items: center;\n  margin-bottom: 5px;\n}\n.vb-multiple-select .select-dropdown > .select-operation .operation .inverse {\n  margin-left: 10px;\n  cursor: pointer;\n}\n.vb-multiple-select .select-dropdown > .select-operation .operation .inverse:hover {\n  color: #57a3f3;\n}\n.vb-multiple-select .select-dropdown > .select-operation .operation .option-len {\n  float: right;\n  color: #666;\n}\n.vb-multiple-select .select-dropdown > .select-dropdown-list {\n  overflow: auto;\n  max-height: 200px;\n}\n.vb-multiple-select .select-dropdown > .select-dropdown-list li {\n  height: 30px;\n  line-height: 30px;\n  padding: 0 5px;\n  cursor: pointer;\n}\n.vb-multiple-select .select-dropdown > .select-dropdown-list li:hover {\n  background: #f5f5f5;\n}\n.vb-multiple-select .select-dropdown > .select-dropdown-list li ::v-deep .ivu-checkbox-wrapper {\n  display: block;\n}\n.vb-multiple-select .select-dropdown > .select-dropdown-list .no-data {\n  height: 100px;\n  line-height: 100px;\n  text-align: center;\n  color: #808695;\n}\n\n/*# sourceMappingURL=v-multiple-select.vue.map */",'<style lang="scss" scoped>\n@import \'./style\';\n</style>\n\n<template>\n  <div :class="multipleSelectClass">\n    <div class="select-selection"\n      @click="toogleVisible">\n      <div class="selection-content">\n        <span v-if="value.length"\n          class="selection-selected-label">{{selectedValues.map(v => v.label).join(\',\')}}</span>\n        <span class="selection-placeholder"\n          v-else>{{placeholder}}</span>\n      </div>\n      <Icon type="ios-arrow-down"\n        class="select-arrow"></Icon>\n    </div>\n    <transition name="slide-up">\n      <div v-show="visible"\n        class="select-dropdown"\n        @click.stop>\n        <div class="select-operation">\n          <div v-show="filter"\n            class="search-input">\n            <Input v-model="searchText"\n              size="small"\n              placeholder="输入搜索"\n              class="input"\n              @on-change="onSearchChange"></Input>\n          </div>\n          <div class="operation">\n            <Checkbox :value="allSelected"\n              :indeterminate="allIndeterminate"\n              :disabled="!filterOptions.length"\n              @on-change="onSelectedAllChange">全选</Checkbox>\n            <span v-show="inverse"\n              class="inverse"\n              @click="onClickInverse">反选</span>\n            <Checkbox v-if="showSelect"\n              v-model="onlySelected"\n              class="select-filter"\n              :disabled="!localOptions.length"\n              @on-change="onOnlySelectedChange">只看已选</Checkbox>\n            <span class="option-len">\n              {{value.length}}/{{options.length}}\n            </span>\n            </span>\n          </div>\n        </div>\n        <div class="select-dropdown-list">\n          <ul v-if="filterOptions.length">\n            <li v-for="(item, index) in filterOptions"\n              :key="index">\n              <Checkbox v-model="item.checked"\n                @on-change="onOptionItemCheckChange">{{item.label}}</Checkbox>\n            </li>\n          </ul>\n          <div v-else\n            class="no-data">没有数据</div>\n        </div>\n      </div>\n    </transition>\n  </div>\n</template>\n\n<script lang="ts">\nimport { Vue, Component, Prop, Watch } from \'vue-property-decorator\';\n\n@Component({ name: \'VMultipleSelect\' })\nexport default class VMultipleSelect extends Vue {\n  @Prop({ type: Array, default: () => [] }) public value!: Array<\n    string | number\n  >; // 传入的选定值\n  @Prop({ type: Array, default: () => [] })\n  public options!: MultiSelectOption[]; // 传入的下拉选项\n  @Prop({ type: String, default: \'请选择\' }) public placeholder!: string;\n  @Prop({ type: Boolean, default: false }) public inverse!: boolean; // 是否开启反选\n  @Prop({ type: Boolean, default: false }) public filter!: boolean; // 是否开启搜索\n  @Prop({ type: Boolean, default: false }) public showSelect!: boolean; // 是否开启只看已选\n\n  public searchText = \'\';\n  public onlySelected = false;\n  public localOptions: LMultiSelectOption[] = [];\n  public visible = false;\n\n  @Watch(\'options\', { immediate: true })\n  public optionsHandler(v: MultiSelectOption[]) {\n    this.localOptions = v.map(option => {\n      const checked = this.value.indexOf(option.value) !== -1;\n      return { ...option, checked };\n    });\n  }\n\n  @Watch(\'value\', { deep: true })\n  public valueHandler() {\n    this.localOptions = this.options.map(option => {\n      const checked = this.value.indexOf(option.value) !== -1;\n      return { ...option, checked };\n    });\n  }\n\n  public get multipleSelectClass() {\n    return {\n      \'vb-multiple-select\': true,\n      \'select-visible\': this.visible,\n    };\n  }\n\n  public get multipleSelectDropDownClass() {\n    return {\n      \'select-dropdown\': true,\n    };\n  }\n\n  public get allSelected() {\n    return (\n      this.filterOptions.filter(v => v.checked).length ===\n      this.filterOptions.length\n    );\n  }\n\n  public get allIndeterminate() {\n    const ol = this.filterOptions.length;\n    return (\n      ol && this.filterSelectOptionLen > 0 && this.filterSelectOptionLen < ol\n    );\n  }\n\n  public get filterSelectOptionLen() {\n    return this.filterOptions.filter(v => v.checked).length;\n  }\n\n  public get filterOptions() {\n    let o = this.localOptions;\n    if (this.searchText) {\n      o = o.filter(v => v.label.indexOf(this.searchText) !== -1);\n    }\n    if (this.onlySelected) {\n      o = o.filter(v => v.checked);\n    }\n    return o;\n  }\n\n  public get selectedValues() {\n    return this.options.filter(v => this.value.includes(v.value));\n  }\n\n  public mounted() {\n    document.body.addEventListener(\'click\', this.clickHandler);\n  }\n\n  public beforeDestroy() {\n    document.body.removeEventListener(\'click\', this.clickHandler);\n  }\n\n  public toogleVisible() {\n    this.visible = !this.visible;\n  }\n\n  public onSearchChange(v: string) {}\n\n  public onOnlySelectedChange(v: boolean) {}\n\n  public onClickInverse() {\n    if (!this.filterOptions.length) {\n      return;\n    }\n    this.filterOptions.forEach(o => {\n      this.$set(o, \'checked\', !o.checked);\n    });\n    this.emitChange();\n  }\n\n  /**\n   * 全选CheckBox变化处理\n   *\n   * @param {boolean} v\n   */\n  public onSelectedAllChange(v: boolean) {\n    this.filterOptions.forEach(o => {\n      this.$set(o, \'checked\', v);\n    });\n    // this.$forceUpdate();\n    this.emitChange();\n  }\n\n  /**\n   * 点击选项\n   *\n   * @param {boolean} checked\n   */\n  public onOptionItemCheckChange(checked: boolean) {\n    this.emitChange();\n  }\n\n  private clickHandler(e: Event) {\n    if (this.$el.contains(e.target as any)) {\n      return;\n    }\n    if (this.visible) {\n      this.visible = !this.visible;\n    }\n  }\n\n  private emitChange() {\n    const selectedValues = this.localOptions\n      .filter(v => v.checked)\n      .map(v => v.value);\n    this.$emit(\'input\', selectedValues);\n    this.$emit(\'on-change\', selectedValues);\n  }\n}\n\ninterface MultiSelectOption {\n  label: string;\n  value: string | number;\n  [i: string]: any;\n}\n\ninterface LMultiSelectOption extends MultiSelectOption {\n  checked: boolean;\n}\n<\/script>\n\n']},media:void 0})}),K,"data-v-01b1f9fb",!1,void 0,!1,N,void 0,void 0);var se=(D=require("./clusterize-list.render.html?style=./clusterize-list.scss"),V=e({name:"VClusterizeList"}),Y=t({type:Array,default:function(){return[]}}),U=t({type:Number,default:50}),W=t({type:Number,default:32}),Z=t({type:Number,default:4}),X=t({type:String,default:"key"}),q=n("data"),D(Q=V((G=A((J=function(e){function t(){var e,n;s(this,t);for(var i=arguments.length,l=new Array(i),r=0;r<i;r++)l[r]=arguments[r];return b(n=v(this,(e=u(t)).call.apply(e,[this].concat(l))),"data",G,f(n)),b(n,"rows",ee,f(n)),b(n,"itemHeight",te,f(n)),b(n,"offset",ne,f(n)),b(n,"dataKey",ie,f(n)),n.firstHeight=0,n.startIndex=0,n.scrollHandler=null,n.fillContetnNun=0,n}return h(t,i),a(t,[{key:"dataHandler",value:function(e,t){var n=this;this.fillContetnNun?(this.updateProgress(e.length-t.length),this.unbindScroll(),this.data.length>this.rows&&this.bindScroll()):(this.$nextTick((function(){var e=n.$el;n.fillContetnNun=Math.ceil(e.offsetHeight/n.itemHeight)})),this.data.length>this.rows&&this.bindScroll())}},{key:"beforeDestroy",value:function(){this.unbindScroll()}},{key:"throttle",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=!0;return function(i){n&&(n=!1,setTimeout((function(){e(i),n=!0}),t))}}},{key:"throttleScrollHandler",value:function(e){var t=this,n=this.$el.scrollTop,i=Math.floor(n/this.localContainHeight),l=i*this.localContain;this.startIndex!==l&&(this.startIndex=l,this.firstHeight=i*this.localContainHeight,this.$nextTick((function(){t.$el.scrollTop=n})))}},{key:"logInfo",value:function(){console.log("[".concat(this.startIndex,"-").concat(this.endIndx,"]"),this.endIndx-this.localRest)}},{key:"bindScroll",value:function(){var e,t,n;this.scrollHandler=this.throttle(this.throttleScrollHandler),e="scroll",t=this.$el,n=this.scrollHandler,t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent("on"+e,n)}},{key:"unbindScroll",value:function(){var e,t,n;this.scrollHandler&&(e="scroll",t=this.$el,n=this.scrollHandler,t.removeEventListener?t.removeEventListener(e,n,!1):t.detachEvent("on"+e,n),this.scrollHandler=null)}},{key:"updateProgress",value:function(e){var t=this;if(this.data.length<=this.rows&&this.startIndex){this.startIndex=0,this.firstHeight=0;var n=this.$el.scrollHeight-this.itemHeight*e;this.$nextTick((function(){t.$el.scrollTop=n}))}}},{key:"renderList",get:function(){return this.data.length<=this.rows?this.data:this.data.slice(this.startIndex,this.endIndx)}},{key:"localRest",get:function(){return this.fillContetnNun+this.offset}},{key:"localContain",get:function(){return this.rows-this.localRest}},{key:"localContainHeight",get:function(){return this.itemHeight*this.localContain}},{key:"endIndx",get:function(){return this.startIndex+this.rows}},{key:"lastHeight",get:function(){var e=(this.data.length-this.rows)*this.itemHeight-this.firstHeight;return e<0?0:e}}]),t}()).prototype,"data",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ee=A(J.prototype,"rows",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),te=A(J.prototype,"itemHeight",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ne=A(J.prototype,"offset",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ie=A(J.prototype,"dataKey",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A(J.prototype,"dataHandler",[q],Object.getOwnPropertyDescriptor(J.prototype,"dataHandler"),J.prototype),Q=J))||Q)||Q),re=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ul",{staticClass:"vb-clusterize-list"},[n("li",{staticClass:"clusterize-list-li-first",style:{height:e.firstHeight+"px"}}),e._v(" "),e._l(e.renderList,(function(t,i){return n("li",{key:t[e.dataKey]},[n("Checkbox",{attrs:{disabled:t.disabled||t._disabled},on:{"on-change":function(t){return e.$emit("on-change",t)}},model:{value:t._checked,callback:function(n){e.$set(t,"_checked",n)},expression:"item._checked"}},[n("span",{staticClass:"checkbox-text"},[e._v(e._s(t.label))])])],1)})),e._v(" "),n("li",{staticClass:"clusterize-list-li-last",style:{height:e.lastHeight+"px"}})],2)};re._withStripped=!0;var ae,oe,ce,de,he,ue,pe,fe,ve,be,Ae,ge,me,xe,Ce,ye,ke,we,Ee,Be,Le,Se,_e,Oe,ze,Te,Re,Pe,$e,He=H({render:re,staticRenderFns:[]},(function(e){e&&e("data-v-68958c86_0",{source:".vb-clusterize-list[data-v-68958c86] {\n  position: relative;\n  height: 100%;\n  overflow-y: auto;\n}\n.vb-clusterize-list li[data-v-68958c86] {\n  height: 32px;\n  line-height: 32px;\n  padding: 0 8px;\n  cursor: pointer;\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n}\n.vb-clusterize-list li[data-v-68958c86]:hover {\n  background: #f3f3f3;\n}\n\n/*# sourceMappingURL=v-clusterize-list.vue.map */",map:{version:3,sources:["v-clusterize-list.vue","/Users/huxiang/code/github/view-base-ui/src/components/v-transfer-box/v-clusterize-list/v-clusterize-list.vue"],names:[],mappings:"AAAA;ECCA,kBAAA;EDCE,YAAY;EACZ,gBAAgB;AAClB;AACA;EACE,YAAY;EACZ,iBAAiB;EACjB,cAAc;EACd,eAAe;EACf,gBAAgB;EAChB,mBAAmB;EACnB,uBAAuB;AACzB;AACA;EACE,mBAAmB;AACrB;;AAEA,gDAAgD",file:"v-clusterize-list.vue",sourcesContent:[".vb-clusterize-list {\n  position: relative;\n  height: 100%;\n  overflow-y: auto;\n}\n.vb-clusterize-list li {\n  height: 32px;\n  line-height: 32px;\n  padding: 0 8px;\n  cursor: pointer;\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n}\n.vb-clusterize-list li:hover {\n  background: #f3f3f3;\n}\n\n/*# sourceMappingURL=v-clusterize-list.vue.map */",'<style scoped lang="scss">\n@import \'./style.scss\';\n</style>\n\n<template>\n  <ul class="vb-clusterize-list">\n    <li :style="{\'height\': `${firstHeight}px`}"\n      class="clusterize-list-li-first"></li>\n    <li v-for="(item, index) in renderList"\n      :key="item[dataKey]">\n      <Checkbox v-model="item._checked"\n        :disabled="item.disabled || item._disabled"\n        @on-change="$emit(\'on-change\', $event)">\n        <span class="checkbox-text">{{item.label}}</span>\n      </Checkbox>\n    </li>\n    <li :style="{\'height\': `${lastHeight}px`}"\n      class="clusterize-list-li-last"></li>\n  </ul>\n</template>\n\n<script lang="ts">\nimport { Vue, Component, Prop, Watch } from \'vue-property-decorator\';\nimport { on, off } from \'../../../utils\';\n\n@require(\'./clusterize-list.render.html?style=./clusterize-list.scss\')\n@Component({ name: \'VClusterizeList\' })\nexport default class VClusterizeList extends Vue {\n  @Prop({ type: Array, default: () => [] }) public data!: any[];\n  @Prop({ type: Number, default: 50 }) public rows!: number; // 放多少行\n  @Prop({ type: Number, default: 32 }) public itemHeight!: number; // 一行的高度\n  @Prop({ type: Number, default: 4 }) public offset!: number; // 距离上下还剩多少获取下一截数据\n  @Prop({ type: String, default: \'key\' }) public dataKey!: string; // 穿梭框索引key值。唯一值\n\n  public firstHeight = 0;\n  public startIndex = 0;\n  private scrollHandler: any = null;\n  private fillContetnNun = 0; // 几个item能把父级可视区域塞满\n\n  public get renderList() {\n    return this.data.length <= this.rows\n      ? this.data\n      : this.data.slice(this.startIndex, this.endIndx);\n  }\n\n  // 内容填充加上偏移量\n  public get localRest() {\n    return this.fillContetnNun + this.offset;\n  }\n  public get localContain() {\n    return this.rows - this.localRest;\n  }\n  public get localContainHeight() {\n    return this.itemHeight * this.localContain;\n  }\n  // 截取数组的结束索引\n  public get endIndx() {\n    return this.startIndex + this.rows;\n  }\n  // 计算最底层的高度\n  public get lastHeight() {\n    const h =\n      (this.data.length - this.rows) * this.itemHeight - this.firstHeight;\n    return h < 0 ? 0 : h;\n  }\n\n  @Watch(\'data\')\n  public dataHandler(newData: any[], oldData: any[]) {\n    if (!this.fillContetnNun) {\n      this.$nextTick(() => {\n        const el = this.$el as HTMLUListElement;\n        this.fillContetnNun = Math.ceil(el.offsetHeight / this.itemHeight); // 10;\n      });\n      if (this.data.length > this.rows) {\n        this.bindScroll();\n      }\n    } else {\n      this.updateProgress(newData.length - oldData.length);\n      this.unbindScroll();\n      if (this.data.length > this.rows) {\n        this.bindScroll();\n      }\n    }\n  }\n\n  public beforeDestroy() {\n    this.unbindScroll();\n  }\n\n  private throttle(fn: any, delay: number = 10) {\n    let valid = true;\n    return (e: any) => {\n      if (!valid) {\n        return;\n      }\n      valid = false;\n      setTimeout(() => {\n        fn(e);\n        valid = true;\n      }, delay);\n    };\n  }\n\n  private throttleScrollHandler(e: any) {\n    const elScrollTop = this.$el.scrollTop;\n    const step = Math.floor(elScrollTop / this.localContainHeight);\n    const newIndex = step * this.localContain;\n    if (this.startIndex !== newIndex) {\n      this.startIndex = newIndex;\n      this.firstHeight = step * this.localContainHeight;\n\n      this.$nextTick(() => {\n        // this.logInfo();\n        this.$el.scrollTop = elScrollTop;\n      });\n    }\n  }\n\n  private logInfo() {\n    console.log(\n      `[${this.startIndex}-${this.endIndx}]`,\n      this.endIndx - this.localRest,\n    );\n  }\n\n  private bindScroll() {\n    this.scrollHandler = this.throttle(this.throttleScrollHandler);\n    on(\'scroll\', this.$el, this.scrollHandler);\n  }\n\n  private unbindScroll() {\n    if (this.scrollHandler) {\n      off(\'scroll\', this.$el, this.scrollHandler);\n      this.scrollHandler = null;\n    }\n  }\n\n  /**\n   * 更新滚动条\n   *\n   * @private\n   * @param {number} changeLen\n   */\n  private updateProgress(changeLen: number) {\n    // 数据是否少于触发点\n    if (this.data.length <= this.rows) {\n      if (this.startIndex) {\n        this.startIndex = 0;\n        this.firstHeight = 0;\n        const scrollTop = this.$el.scrollHeight - this.itemHeight * changeLen;\n        this.$nextTick(() => {\n          this.$el.scrollTop = scrollTop;\n        });\n      }\n    }\n  }\n}\n<\/script>']},media:void 0})}),se,"data-v-68958c86",!1,void 0,!1,N,void 0,void 0),Me=(ae=e({name:"VTransferBox",components:{Checkbox:l,ClusterizeList:He}}),oe=t({type:Array,default:function(){return[]}}),ce=t({type:Array,default:function(){return[]}}),de=t({type:String,default:"key"}),he=t({type:Array,default:function(){return[]}}),ue=t({type:Function}),pe=t({type:Boolean,default:!1}),fe=t({type:Boolean,default:!1}),ve=t({type:Number,default:0}),be=t({type:Function}),Ae=t({type:[String,Array],default:"请输入内容搜索"}),ge=t({type:Number,default:0}),me=t({type:String,default:""}),xe=n("data"),Ce=n("leftFilterName"),ae((we=A((ke=function(e){function t(){var e,n;s(this,t);for(var i=arguments.length,l=new Array(i),r=0;r<i;r++)l[r]=arguments[r];return b(n=v(this,(e=u(t)).call.apply(e,[this].concat(l))),"data",we,f(n)),b(n,"targetKeys",Ee,f(n)),b(n,"dataKey",Be,f(n)),b(n,"titles",Le,f(n)),b(n,"renderFormat",Se,f(n)),b(n,"filter",_e,f(n)),b(n,"remote",Oe,f(n)),b(n,"remoteLen",ze,f(n)),b(n,"remoteMethod",Te,f(n)),b(n,"filterPlaceholder",Re,f(n)),b(n,"max",Pe,f(n)),b(n,"maxTip",$e,f(n)),n.transferList=[],n.leftFilterName="",n.rightFilterName="",n.selectAllLeft=!1,n.selectAllRight=!1,n.showRemote=!1,n.remoteTimeout=0,n}return h(t,i),a(t,[{key:"dataHandler",value:function(e){var t=this;e&&e.length&&(this.transferList=e.map((function(e,n){var i,l=e[t.dataKey]||"key-".concat(n),s=!1;return t.overMax&&(s=t.isMatchUnSelected(e)),o(i={label:t.renderLabel(e)},t.dataKey,l),o(i,"disabled",e.disabled),o(i,"_checked",!1),o(i,"_disabled",s),i})))}},{key:"leftFilterNameHandler",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(this.$emit("on-filter-change",{type:1,value:t}),this.selectAllLeft&&(this.selectAllLeft=!1),this.onSelectLeftAllChange(!1),this.remote){if(!this.remoteMethod)return this.$Message.warning("未定义remoteMethod");if(t.length<this.remoteLen)return;this.showRemote=!0,this.remoteTimeout&&clearTimeout(this.remoteTimeout),this.remoteTimeout=window.setTimeout((function(){e.remoteMethod(t).then((function(){e.showRemote=!1,e.$emit("on-remote-success"),e.$emit("on-remote-finish")})).catch((function(){e.showRemote=!1,e.$emit("on-remote-failed"),e.$emit("on-remote-finish")}))}),300)}else this.$nextTick((function(){e.isOverMax()}))}},{key:"onSelectLeftAllChange",value:function(e){var t=this.unSelectedList.length,n=this.targetKeys.length;if(this.max&&e&&t+n>=this.max){var i=this.max-n,l=this.unSelectedList.filter((function(e){return!e._checked}));i-=t-l.length,l.forEach((function(e,t){e.disabled||(i>0?(i--,e._checked=!0):e._disabled=!0)}))}else this.unSelectedList.forEach((function(t){t.disabled||(t._checked=e)}));this.isOverMax()}},{key:"onLeftCheckboxChange",value:function(e){this.isOverMax(),e?this.unSelectedAndNoDisabledList.every((function(e){return e._checked}))&&(this.selectAllLeft=!0):this.selectAllLeft=!1}},{key:"moveToSelected",value:function(){var e=this;this.selectAllLeft=!1;var t=[];this.unSelectedList.forEach((function(n){n._checked&&(t.push(n[e.dataKey]),e.$set(n,"_checked",!1))})),this.$emit("on-change",this.targetKeys.concat(t))}},{key:"moveToUnselected",value:function(){var e=this;this.selectAllRight=!1;var t=[];this.selectedList.forEach((function(n){n._checked&&(t.push(n[e.dataKey]),e.$set(n,"_checked",!1))}));var n=this.targetKeys.filter((function(e){return!t.includes(e)}));this.$emit("on-change",n),this.$nextTick((function(){e.isOverMax()}))}},{key:"onSelectRightAllChange",value:function(e){var t=this;this.selectedList.forEach((function(n){e?t.notDisabled(n)&&(n._checked=!0):n._checked=!1}))}},{key:"onRightSearchChange",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.$emit("on-filter-change",{type:2,value:e}),this.selectAllRight&&(this.selectAllRight=!1),this.onSelectRightAllChange(!1)}},{key:"onRightCheckboxChange",value:function(e){e?this.selectedList.filter((function(e){return e._checked&&!e.disabled})).length===this.selectedList.filter((function(e){return!e.disabled})).length&&(this.selectAllRight=e):this.selectAllRight=e}},{key:"renderLabel",value:function(e){return this.renderFormat?this.renderFormat(e):e.label||""}},{key:"isOverMax",value:function(){this.max&&(this.targetKeys.length+this.leftSelectedLength>=this.max?this.unSelectedList.forEach((function(e){e._checked||(e._disabled=!0)})):this.unSelectedList.forEach((function(e){e._disabled=!1})))}},{key:"isMatchSelected",value:function(e){return-1!==this.S_T_K.indexOf(e[this.dataKey])&&-1!==e.label.indexOf(this.rightFilterName)}},{key:"isMatchUnSelected",value:function(e){return-1===this.S_T_K.indexOf(e[this.dataKey])&&-1!==e.label.indexOf(this.leftFilterName)}},{key:"notDisabled",value:function(e){var t=e.disabled,n=e._disabled;return!t&&!n}},{key:"leftFilterPlaceholder",get:function(){return"string"==typeof this.filterPlaceholder?this.filterPlaceholder:this.filterPlaceholder[0]}},{key:"rightFilterPlaceholder",get:function(){return"string"==typeof this.filterPlaceholder?this.filterPlaceholder:this.filterPlaceholder[1]}},{key:"S_T_K",get:function(){return this.targetKeys.join(",")}},{key:"unSelectedList",get:function(){var e=this;return this.transferList.filter((function(t){return e.isMatchUnSelected(t)}))}},{key:"unSelectedAndNoDisabledList",get:function(){var e=this;return this.unSelectedList.filter((function(t){return e.notDisabled(t)}))}},{key:"selectedList",get:function(){var e=this;return this.transferList.filter((function(t){return e.isMatchSelected(t)}))}},{key:"selectedAndNoDisabledList",get:function(){var e=this;return this.selectedList.filter((function(t){return e.notDisabled(t)}))}},{key:"indeterminateLeft",get:function(){var e=this.unSelectedList.filter((function(e){return e._checked})).length;return e>0&&e<this.unSelectedAndNoDisabledList.length}},{key:"indeterminateRight",get:function(){var e=this.selectedList.filter((function(e){return e._checked})).length;return e>0&&e<this.selectedAndNoDisabledList.length}},{key:"leftSelectedLength",get:function(){return this.unSelectedList.filter((function(e){return e._checked})).length}},{key:"rightSelectedLength",get:function(){return this.selectedList.filter((function(e){return e._checked})).length}},{key:"localFilter",get:function(){return this.filter||this.remote}},{key:"overMax",get:function(){return!!this.max&&this.targetKeys.length>=this.max}},{key:"disabledAllLeft",get:function(){return this.unSelectedList.every((function(e){return e._disabled||e.disabled}))}},{key:"disabledAllRight",get:function(){return this.selectedList.every((function(e){return e.disabled}))}}]),t}()).prototype,"data",[oe],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ee=A(ke.prototype,"targetKeys",[ce],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Be=A(ke.prototype,"dataKey",[de],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Le=A(ke.prototype,"titles",[he],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Se=A(ke.prototype,"renderFormat",[ue],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_e=A(ke.prototype,"filter",[pe],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Oe=A(ke.prototype,"remote",[fe],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ze=A(ke.prototype,"remoteLen",[ve],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Te=A(ke.prototype,"remoteMethod",[be],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Re=A(ke.prototype,"filterPlaceholder",[Ae],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Pe=A(ke.prototype,"max",[ge],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$e=A(ke.prototype,"maxTip",[me],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A(ke.prototype,"dataHandler",[xe],Object.getOwnPropertyDescriptor(ke.prototype,"dataHandler"),ke.prototype),A(ke.prototype,"leftFilterNameHandler",[Ce],Object.getOwnPropertyDescriptor(ke.prototype,"leftFilterNameHandler"),ke.prototype),ye=ke))||ye),Ne=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"vb-transfer-box"},[n("div",{staticClass:"source-card "},[n("div",{staticClass:"header"},[n("Checkbox",{attrs:{disabled:e.disabledAllLeft,indeterminate:e.indeterminateLeft},on:{"on-change":e.onSelectLeftAllChange},model:{value:e.selectAllLeft,callback:function(t){e.selectAllLeft=t},expression:"selectAllLeft"}},[n("span",{staticClass:"checkbox-text"},[e._v(e._s(e.titles[0]||"待选框"))])]),e._v(" "),n("span",[e._v(e._s(e.leftSelectedLength?e.leftSelectedLength+" / ":"")+e._s(e.unSelectedList.length?e.unSelectedList.length:""))])],1),e._v(" "),e.localFilter?n("div",{staticClass:"search-input"},[n("Input",{attrs:{suffix:"ios-search",placeholder:e.leftFilterPlaceholder},model:{value:e.leftFilterName,callback:function(t){e.leftFilterName=t},expression:"leftFilterName"}})],1):e._e(),e._v(" "),n("div",{class:["content",e.localFilter?"filter-content":""]},[n("ClusterizeList",{directives:[{name:"show",rawName:"v-show",value:!e.showRemote&&e.unSelectedList.length,expression:"!showRemote && unSelectedList.length"}],key:e.dataKey,attrs:{data:e.unSelectedList},on:{"on-change":e.onLeftCheckboxChange}}),e._v(" "),!e.localFilter||e.showRemote||e.unSelectedList.length?e._e():n("div",{staticClass:"message-wrapper"},[n("span",{staticClass:"no-data-message"},[n("Icon",{attrs:{type:"md-document"}}),e._v("无数据\n        ")],1)]),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.showRemote,expression:"showRemote"}],staticClass:"message-wrapper"},[n("span",{staticClass:"remote-message"},[n("Icon",{attrs:{type:"ios-search"}}),e._v("正在搜索...\n        ")],1)])],1)]),e._v(" "),n("div",{staticClass:"action-button"},[e._t("extraAction"),e._v(" "),n("Button",{attrs:{icon:"ios-arrow-forward",type:"primary",disabled:e.overMax||!e.leftSelectedLength},on:{click:e.moveToSelected}},[e._v("移至已选")]),e._v(" "),n("Button",{attrs:{icon:"ios-arrow-back",type:"primary",disabled:!e.rightSelectedLength},on:{click:e.moveToUnselected}},[e._v("移至待选")]),e._v(" "),e.max?n("div",{staticClass:"tip"},[e._v(e._s(e.maxTip||"上限"+e.max+"项"))]):e._e()],2),e._v(" "),n("div",{staticClass:"target-card"},[n("div",{staticClass:"header"},[n("Checkbox",{attrs:{disabled:e.disabledAllRight,indeterminate:e.indeterminateRight},on:{"on-change":e.onSelectRightAllChange},model:{value:e.selectAllRight,callback:function(t){e.selectAllRight=t},expression:"selectAllRight"}},[n("span",{staticClass:"checkbox-text"},[e._v(e._s(e.titles[1]||"已选框"))])]),e._v(" "),n("span",[e._v(e._s(e.rightSelectedLength?e.rightSelectedLength+" / ":"")),n("span",{style:{color:e.overMax?"#ed4014":""}},[e._v(e._s(e.selectedList.length?e.selectedList.length:""))])])],1),e._v(" "),e.localFilter?n("div",{staticClass:"search-input"},[n("Input",{attrs:{suffix:"ios-search",placeholder:e.rightFilterPlaceholder},on:{"on-change":e.onRightSearchChange},model:{value:e.rightFilterName,callback:function(t){e.rightFilterName=t},expression:"rightFilterName"}})],1):e._e(),e._v(" "),n("div",{class:["content",e.localFilter?"filter-content":""]},[n("ClusterizeList",{key:e.dataKey,attrs:{data:e.selectedList},on:{"on-change":e.onRightCheckboxChange}})],1)])])};Ne._withStripped=!0;var Ie=H({render:Ne,staticRenderFns:[]},(function(e){e&&e("data-v-6e1a65c5_0",{source:".vb-transfer-box[data-v-6e1a65c5] {\n  display: flex;\n  align-items: center;\n  height: 400px;\n  background: #ffffff;\n}\n.vb-transfer-box .source-card[data-v-6e1a65c5],\n.vb-transfer-box .target-card[data-v-6e1a65c5] {\n  position: relative;\n  width: 300px;\n  height: 100%;\n  border: 1px solid #e4e4e4;\n  border-radius: 4px;\n}\n.vb-transfer-box .source-card .header[data-v-6e1a65c5],\n.vb-transfer-box .target-card .header[data-v-6e1a65c5] {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  height: 40px;\n  padding: 0 8px;\n  border-bottom: 1px solid #e4e4e4;\n  background: #f9fafc;\n}\n.vb-transfer-box .source-card .search-input[data-v-6e1a65c5],\n.vb-transfer-box .target-card .search-input[data-v-6e1a65c5] {\n  position: absolute;\n  top: 48px;\n  left: 0;\n  width: 100%;\n  padding: 0 8px;\n}\n.vb-transfer-box .source-card .content[data-v-6e1a65c5],\n.vb-transfer-box .target-card .content[data-v-6e1a65c5] {\n  height: 100%;\n  padding-top: 50px;\n}\n.vb-transfer-box .source-card .content.filter-content[data-v-6e1a65c5],\n.vb-transfer-box .target-card .content.filter-content[data-v-6e1a65c5] {\n  padding-top: 90px;\n}\n.vb-transfer-box .source-card .content ul[data-v-6e1a65c5],\n.vb-transfer-box .target-card .content ul[data-v-6e1a65c5] {\n  height: 100%;\n  overflow-y: auto;\n}\n.vb-transfer-box .source-card .content ul li[data-v-6e1a65c5],\n.vb-transfer-box .target-card .content ul li[data-v-6e1a65c5] {\n  height: 32px;\n  line-height: 32px;\n  padding: 0 8px;\n  cursor: pointer;\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n}\n.vb-transfer-box .source-card .content ul li[data-v-6e1a65c5]:hover,\n.vb-transfer-box .target-card .content ul li[data-v-6e1a65c5]:hover {\n  background: #f3f3f3;\n}\n.vb-transfer-box .source-card .message-wrapper[data-v-6e1a65c5],\n.vb-transfer-box .target-card .message-wrapper[data-v-6e1a65c5] {\n  position: relative;\n  z-index: 10;\n  height: 100%;\n  width: 100%;\n}\n.vb-transfer-box .source-card .message-wrapper .no-data-message[data-v-6e1a65c5],\n.vb-transfer-box .source-card .message-wrapper .remote-message[data-v-6e1a65c5],\n.vb-transfer-box .target-card .message-wrapper .no-data-message[data-v-6e1a65c5],\n.vb-transfer-box .target-card .message-wrapper .remote-message[data-v-6e1a65c5] {\n  position: absolute;\n  top: 0;\n  left: 0;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 100%;\n  width: 100%;\n  background: #ffffff;\n  color: #808695;\n  font-size: 14px;\n}\n.vb-transfer-box[data-v-6e1a65c5]  .checkbox-text {\n  padding-left: 8px;\n}\n.vb-transfer-box .action-button[data-v-6e1a65c5] {\n  padding: 0 10px;\n}\n.vb-transfer-box .action-button button[data-v-6e1a65c5] {\n  margin: 10px 0;\n  display: block;\n}\n.vb-transfer-box .action-button .tip[data-v-6e1a65c5] {\n  text-align: center;\n  font-size: 12px;\n  color: #808695;\n}\n\n/*# sourceMappingURL=v-transfer-box.vue.map */",map:{version:3,sources:["v-transfer-box.vue","/Users/huxiang/code/github/view-base-ui/src/components/v-transfer-box/v-transfer-box.vue"],names:[],mappings:"AAAA;ECCA,aAAA;EDCE,mBAAmB;EACnB,aAAa;EACb,mBAAmB;AACrB;AACA;;EAEE,kBAAkB;EAClB,YAAY;EACZ,YAAY;EACZ,yBAAyB;EACzB,kBAAkB;AACpB;AACA;;EAEE,kBAAkB;EAClB,MAAM;EACN,OAAO;EACP,WAAW;EACX,aAAa;EACb,8BAA8B;EAC9B,mBAAmB;EACnB,YAAY;EACZ,cAAc;EACd,gCAAgC;EAChC,mBAAmB;AACrB;AACA;;EAEE,kBAAkB;EAClB,SAAS;EACT,OAAO;EACP,WAAW;EACX,cAAc;AAChB;AACA;;EAEE,YAAY;EACZ,iBAAiB;AACnB;AACA;;EAEE,iBAAiB;AACnB;AACA;;EAEE,YAAY;EACZ,gBAAgB;AAClB;AACA;;EAEE,YAAY;EACZ,iBAAiB;EACjB,cAAc;EACd,eAAe;EACf,gBAAgB;EAChB,mBAAmB;EACnB,uBAAuB;AACzB;AACA;;EAEE,mBAAmB;AACrB;AACA;;EAEE,kBAAkB;EAClB,WAAW;EACX,YAAY;EACZ,WAAW;AACb;AACA;;;;EAIE,kBAAkB;EAClB,MAAM;EACN,OAAO;EACP,aAAa;EACb,uBAAuB;EACvB,mBAAmB;EACnB,YAAY;EACZ,WAAW;EACX,mBAAmB;EACnB,cAAc;EACd,eAAe;AACjB;AACA;EACE,iBAAiB;AACnB;AACA;EACE,eAAe;AACjB;AACA;EACE,cAAc;EACd,cAAc;AAChB;AACA;EACE,kBAAkB;EAClB,eAAe;EACf,cAAc;AAChB;;AAEA,6CAA6C",file:"v-transfer-box.vue",sourcesContent:[".vb-transfer-box {\n  display: flex;\n  align-items: center;\n  height: 400px;\n  background: #ffffff;\n}\n.vb-transfer-box .source-card,\n.vb-transfer-box .target-card {\n  position: relative;\n  width: 300px;\n  height: 100%;\n  border: 1px solid #e4e4e4;\n  border-radius: 4px;\n}\n.vb-transfer-box .source-card .header,\n.vb-transfer-box .target-card .header {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  height: 40px;\n  padding: 0 8px;\n  border-bottom: 1px solid #e4e4e4;\n  background: #f9fafc;\n}\n.vb-transfer-box .source-card .search-input,\n.vb-transfer-box .target-card .search-input {\n  position: absolute;\n  top: 48px;\n  left: 0;\n  width: 100%;\n  padding: 0 8px;\n}\n.vb-transfer-box .source-card .content,\n.vb-transfer-box .target-card .content {\n  height: 100%;\n  padding-top: 50px;\n}\n.vb-transfer-box .source-card .content.filter-content,\n.vb-transfer-box .target-card .content.filter-content {\n  padding-top: 90px;\n}\n.vb-transfer-box .source-card .content ul,\n.vb-transfer-box .target-card .content ul {\n  height: 100%;\n  overflow-y: auto;\n}\n.vb-transfer-box .source-card .content ul li,\n.vb-transfer-box .target-card .content ul li {\n  height: 32px;\n  line-height: 32px;\n  padding: 0 8px;\n  cursor: pointer;\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n}\n.vb-transfer-box .source-card .content ul li:hover,\n.vb-transfer-box .target-card .content ul li:hover {\n  background: #f3f3f3;\n}\n.vb-transfer-box .source-card .message-wrapper,\n.vb-transfer-box .target-card .message-wrapper {\n  position: relative;\n  z-index: 10;\n  height: 100%;\n  width: 100%;\n}\n.vb-transfer-box .source-card .message-wrapper .no-data-message,\n.vb-transfer-box .source-card .message-wrapper .remote-message,\n.vb-transfer-box .target-card .message-wrapper .no-data-message,\n.vb-transfer-box .target-card .message-wrapper .remote-message {\n  position: absolute;\n  top: 0;\n  left: 0;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 100%;\n  width: 100%;\n  background: #ffffff;\n  color: #808695;\n  font-size: 14px;\n}\n.vb-transfer-box ::v-deep .checkbox-text {\n  padding-left: 8px;\n}\n.vb-transfer-box .action-button {\n  padding: 0 10px;\n}\n.vb-transfer-box .action-button button {\n  margin: 10px 0;\n  display: block;\n}\n.vb-transfer-box .action-button .tip {\n  text-align: center;\n  font-size: 12px;\n  color: #808695;\n}\n\n/*# sourceMappingURL=v-transfer-box.vue.map */",'<style lang="scss" scoped>\n@import \'./style.scss\';\n</style>\n\n<template>\n  <div class="vb-transfer-box">\n    <div class="source-card ">\n      \x3c!-- 左侧头 --\x3e\n      <div class="header">\n        <Checkbox v-model="selectAllLeft"\n          :disabled="disabledAllLeft"\n          :indeterminate="indeterminateLeft"\n          @on-change="onSelectLeftAllChange"><span class="checkbox-text">{{titles[0] || \'待选框\'}}</span></Checkbox>\n        <span>{{leftSelectedLength ? `${leftSelectedLength} / ` : \'\'}}{{unSelectedList.length ? unSelectedList.length : \'\'}}</span>\n      </div>\n      \x3c!-- 左侧搜索 --\x3e\n      <div v-if="localFilter"\n        class="search-input">\n        <Input v-model="leftFilterName"\n          suffix="ios-search"\n          :placeholder="leftFilterPlaceholder"></Input>\n      </div>\n      \x3c!-- 左侧选项框 --\x3e\n      <div :class="[\'content\', localFilter ? \'filter-content\' : \'\']">\n        <ClusterizeList v-show="!showRemote && unSelectedList.length"\n          :data="unSelectedList"\n          :key="dataKey"\n          @on-change="onLeftCheckboxChange"></ClusterizeList>\n        <div v-if="localFilter && !showRemote && !unSelectedList.length"\n          class="message-wrapper">\n          <span class="no-data-message">\n            <Icon type="md-document" />无数据\n          </span>\n        </div>\n        <div v-show="showRemote"\n          class="message-wrapper">\n          <span class="remote-message">\n            <Icon type="ios-search"></Icon>正在搜索...\n          </span>\n        </div>\n      </div>\n    </div>\n    <div class="action-button">\n      \x3c!-- 额外的操作框 --\x3e\n      <slot name="extraAction"></slot>\n      <Button icon="ios-arrow-forward"\n        type="primary"\n        :disabled="overMax || !leftSelectedLength"\n        @click="moveToSelected">移至已选</Button>\n      <Button icon="ios-arrow-back"\n        type="primary"\n        :disabled="!rightSelectedLength"\n        @click="moveToUnselected">移至待选</Button>\n      <div v-if="max"\n        class="tip">{{maxTip || `上限${max}项`}}</div>\n    </div>\n    <div class="target-card">\n      \x3c!-- 右侧头 --\x3e\n      <div class="header">\n        <Checkbox v-model="selectAllRight"\n          :disabled="disabledAllRight"\n          :indeterminate="indeterminateRight"\n          @on-change="onSelectRightAllChange"><span class="checkbox-text">{{titles[1] || \'已选框\'}}</span></Checkbox>\n        <span>{{rightSelectedLength ? `${rightSelectedLength} / ` : \'\'}}<span :style="{\'color\': overMax ? \'#ed4014\': \'\' }">{{selectedList.length ? selectedList.length : \'\'}}</span></span>\n      </div>\n      \x3c!-- 右侧搜索 --\x3e\n      <div v-if="localFilter"\n        class="search-input">\n        <Input v-model="rightFilterName"\n          suffix="ios-search"\n          :placeholder="rightFilterPlaceholder"\n          @on-change="onRightSearchChange"></Input>\n      </div>\n      \x3c!-- 右侧筛选框 --\x3e\n      <div :class="[\'content\', localFilter ? \'filter-content\' : \'\']">\n        \x3c!-- <ul>\n        <li v-for="(item, index) in selectedList"\n          :key="index">\n          <Checkbox v-model="item._checked"\n            :disabled="item.disabled"\n            @on-change="onRightCheckboxChange">\n            <span v-html="renderLabel(item)"\n              class="checkbox-text"></span>\n          </Checkbox>\n        </li>\n      </ul> --\x3e\n        <ClusterizeList :data="selectedList"\n          :key="dataKey"\n          @on-change="onRightCheckboxChange"></ClusterizeList>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script lang="ts">\nimport { Vue, Component, Prop, Watch } from \'vue-property-decorator\';\nimport ClusterizeList from \'./v-clusterize-list\';\nimport { Checkbox } from \'view-design\';\n\n@Component({\n  name: \'VTransferBox\',\n  components: { Checkbox, ClusterizeList },\n})\nexport default class VTransferBox extends Vue {\n  @Prop({ type: Array, default: () => [] }) public data!: any[]; // 穿梭框数据\n  @Prop({ type: Array, default: () => [] }) public targetKeys!: string[]; // 已选的keys\n  @Prop({ type: String, default: \'key\' }) public dataKey!: string; // 穿梭框索引key值。唯一值\n  @Prop({ type: Array, default: () => [] }) public titles!: string[]; // 标题\n  @Prop({ type: Function }) public renderFormat!: (data: any) => string; // 格式化名称\n  @Prop({ type: Boolean, default: false }) public filter!: boolean; // 是否开启搜索\n  @Prop({ type: Boolean, default: false }) public remote!: boolean; // 是否开启远程搜索\n  @Prop({ type: Number, default: 0 }) public remoteLen!: number; // 需要输入几个字符触发远程搜索\n  @Prop({ type: Function }) public remoteMethod!: (\n    name: string,\n  ) => Promise<any>; // 远程搜索方法，返回一个promise。\n  @Prop({ type: [String, Array], default: \'请输入内容搜索\' })\n  public filterPlaceholder!: string; // 搜索框placeholder\n  @Prop({ type: Number, default: 0 }) public max!: number; // 最大人数\n  @Prop({ type: String, default: \'\' }) public maxTip!: string; // 最大上限提示\n\n  public transferList: TransferList[] = []; // 组件内部数据\n  public leftFilterName = \'\'; // 左侧模糊搜索名称\n  public rightFilterName = \'\'; // 右侧模糊搜索名称\n  public selectAllLeft = false; // 左侧全选\n  public selectAllRight = false; // 右侧全选\n  public showRemote = false; // 是否显示正在远程搜索\n  private remoteTimeout = 0;\n\n  public get leftFilterPlaceholder() {\n    return typeof this.filterPlaceholder === \'string\'\n      ? this.filterPlaceholder\n      : this.filterPlaceholder[0];\n  }\n\n  public get rightFilterPlaceholder() {\n    return typeof this.filterPlaceholder === \'string\'\n      ? this.filterPlaceholder\n      : this.filterPlaceholder[1];\n  }\n  public get S_T_K() {\n    return this.targetKeys.join(\',\');\n  }\n  // 待选并匹配搜索的用户信息\n  public get unSelectedList() {\n    return this.transferList.filter(v => this.isMatchUnSelected(v));\n  }\n\n  // 待选并且未被禁用的list\n  public get unSelectedAndNoDisabledList() {\n    return this.unSelectedList.filter(v => this.notDisabled(v));\n  }\n\n  // 已经移入已选并匹配搜索的用户信息\n  public get selectedList() {\n    return this.transferList.filter(v => this.isMatchSelected(v));\n  }\n\n  // 已选并且未被禁用的list\n  public get selectedAndNoDisabledList() {\n    return this.selectedList.filter(v => this.notDisabled(v));\n  }\n\n  public get indeterminateLeft() {\n    const len = this.unSelectedList.filter(v => v._checked).length;\n    return len > 0 && len < this.unSelectedAndNoDisabledList.length;\n  }\n\n  public get indeterminateRight() {\n    const len = this.selectedList.filter(v => v._checked).length;\n    return len > 0 && len < this.selectedAndNoDisabledList.length;\n  }\n\n  public get leftSelectedLength() {\n    return this.unSelectedList.filter(v => v._checked).length;\n  }\n\n  public get rightSelectedLength() {\n    return this.selectedList.filter(v => v._checked).length;\n  }\n\n  public get localFilter() {\n    return this.filter || this.remote;\n  }\n\n  // 是否超出最大上限\n  public get overMax() {\n    return !!this.max && this.targetKeys.length >= this.max;\n  }\n\n  public get disabledAllLeft() {\n    return this.unSelectedList.every(v => v._disabled || v.disabled);\n  }\n\n  public get disabledAllRight() {\n    return this.selectedList.every(v => v.disabled);\n  }\n\n  /**\n   * 根据外部list来设置本地List数据。\n   * 设置唯一key、设置是否选择\n   * @readonly\n   */\n  @Watch(\'data\')\n  public dataHandler(data: any) {\n    if (data && data.length) {\n      this.transferList = data.map((v: any, i: number) => {\n        const keyValue = v[this.dataKey] || `key-${i}`;\n\n        // tslint:disable-next-line:variable-name\n        let _disabled = false;\n        if (this.overMax) {\n          _disabled = this.isMatchUnSelected(v);\n        }\n\n        return {\n          label: this.renderLabel(v),\n          [this.dataKey]: keyValue,\n          disabled: v.disabled,\n          _checked: false,\n          _disabled,\n        };\n      });\n    }\n  }\n\n  @Watch(\'leftFilterName\')\n  public leftFilterNameHandler(value: string = \'\') {\n    this.$emit(\'on-filter-change\', { type: 1, value });\n    if (this.selectAllLeft) {\n      this.selectAllLeft = false;\n    }\n    this.onSelectLeftAllChange(false); // 手动置空已经选中的选项\n\n    // 是否执行远程搜索\n    if (this.remote) {\n      if (!this.remoteMethod) {\n        return this.$Message.warning(\'未定义remoteMethod\');\n      }\n\n      // 判断是否超出了远程搜索长度\n      if (value.length < this.remoteLen) {\n        return;\n      }\n\n      this.showRemote = true;\n\n      // 延迟触发远程搜索\n      if (this.remoteTimeout) {\n        clearTimeout(this.remoteTimeout);\n      }\n      this.remoteTimeout = window.setTimeout(() => {\n        this.remoteMethod(value)\n          .then(() => {\n            this.showRemote = false;\n            this.$emit(\'on-remote-success\');\n            this.$emit(\'on-remote-finish\');\n          })\n          .catch(() => {\n            this.showRemote = false;\n            this.$emit(\'on-remote-failed\');\n            this.$emit(\'on-remote-finish\');\n          });\n      }, 300);\n    } else {\n      this.$nextTick(() => {\n        this.isOverMax();\n      });\n    }\n  }\n\n  /**\n   * 点击左侧全选\n   *\n   * @param {boolean} value\n   */\n  public onSelectLeftAllChange(value: boolean) {\n    // const keys = this.unSelectedList.map(v => v[this.dataKey]);\n\n    const unSelectListLen = this.unSelectedList.length;\n    const selectListLen = this.targetKeys.length;\n\n    // 如果是全选并且设置最大值且当前超过最大值范围， 则只能选到最大值\n    if (this.max && value && unSelectListLen + selectListLen >= this.max) {\n      let count = this.max - selectListLen;\n\n      const leftUnCheckes = this.unSelectedList.filter(v => !v._checked); // 左侧未选\n\n      count = count - (unSelectListLen - leftUnCheckes.length);\n\n      leftUnCheckes.forEach((v, i) => {\n        if (!v.disabled) {\n          if (count > 0) {\n            count--;\n            v._checked = true;\n          } else {\n            v._disabled = true;\n          }\n        }\n      });\n    } else {\n      this.unSelectedList.forEach(v => {\n        if (!v.disabled) {\n          v._checked = value;\n        }\n      });\n    }\n\n    this.isOverMax();\n  }\n\n  /**\n   * 监听左侧待选框的变化\n   *\n   * @param {boolean} value\n   * @returns\n   */\n  public onLeftCheckboxChange(value: boolean) {\n    this.isOverMax();\n    // 判断是否全选\n    if (!value) {\n      this.selectAllLeft = false;\n    } else if (this.unSelectedAndNoDisabledList.every(v => v._checked)) {\n      // 判断未选中且未禁用的列表是否都选中了\n      this.selectAllLeft = true;\n    }\n  }\n\n  /**\n   * 移到已选\n   *\n   */\n  public moveToSelected() {\n    this.selectAllLeft = false;\n    const moveKeys: string[] = [];\n    this.unSelectedList.forEach(v => {\n      if (v._checked) {\n        moveKeys.push(v[this.dataKey]);\n        this.$set(v, \'_checked\', false);\n      }\n    });\n\n    this.$emit(\'on-change\', this.targetKeys.concat(moveKeys));\n  }\n\n  /**\n   * 移到待选\n   *\n   */\n  public moveToUnselected() {\n    this.selectAllRight = false;\n    const removedKeys: string[] = [];\n    this.selectedList.forEach(v => {\n      if (v._checked) {\n        removedKeys.push(v[this.dataKey]);\n        this.$set(v, \'_checked\', false);\n      }\n    });\n    const unRemovedKeys = this.targetKeys.filter(v => !removedKeys.includes(v));\n    this.$emit(\'on-change\', unRemovedKeys);\n\n    this.$nextTick(() => {\n      this.isOverMax(); // 判断是否超出最大限制\n    });\n  }\n\n  /**\n   * 点击右侧全选\n   *\n   * @param {boolean} value\n   */\n  public onSelectRightAllChange(value: boolean) {\n    this.selectedList.forEach(v => {\n      if (!value) {\n        v._checked = false;\n      } else if (this.notDisabled(v)) {\n        v._checked = true;\n      }\n    });\n  }\n\n  /**\n   * 右侧搜索change事件\n   *\n   */\n  public onRightSearchChange(value: string = \'\') {\n    this.$emit(\'on-filter-change\', { type: 2, value });\n    if (this.selectAllRight) {\n      this.selectAllRight = false;\n    }\n    this.onSelectRightAllChange(false); // 手动置空已经选中的选项\n  }\n\n  /**\n   * 右侧多选框切换事件\n   *\n   * @param {boolean} value\n   */\n  public onRightCheckboxChange(value: boolean) {\n    if (value) {\n      const len = this.selectedList.filter(v => v._checked && !v.disabled)\n        .length;\n      if (len === this.selectedList.filter(v => !v.disabled).length) {\n        this.selectAllRight = value;\n      }\n    } else {\n      this.selectAllRight = value;\n    }\n  }\n\n  /**\n   * 渲染label\n   *\n   * @param {*} data\n   * @returns {string}\n   */\n  public renderLabel(data: any): string {\n    return this.renderFormat ? this.renderFormat(data) : data.label || \'\';\n  }\n\n  /**\n   * 判断是否超出最大,并操作是否禁用左侧栏\n   *\n   * @private\n   */\n  private isOverMax() {\n    if (this.max) {\n      const selectedLen = this.targetKeys.length + this.leftSelectedLength;\n      // 超出最大值\n      if (selectedLen >= this.max) {\n        this.unSelectedList.forEach(v => {\n          if (!v._checked) {\n            v._disabled = true;\n          }\n        });\n      } else {\n        // 没有超过最大值的话。则将内部_disabled设置为false\n        this.unSelectedList.forEach(v => {\n          v._disabled = false;\n        });\n      }\n    }\n  }\n\n  /**\n   * 匹配选中的数据\n   *\n   * @description targetKeys中包括并且匹配搜索名\n   * @private\n   * @param {TransferList} data\n   * @returns\n   */\n  private isMatchSelected(data: TransferList) {\n    return (\n      this.S_T_K.indexOf(data[this.dataKey]) !== -1 &&\n      data.label.indexOf(this.rightFilterName) !== -1\n    );\n  }\n\n  /**\n   * 匹配未选中的数据\n   *\n   * @description targetKeys中不包括并且匹配搜索名\n   * @private\n   * @param {TransferList} data\n   * @returns\n   */\n  private isMatchUnSelected(data: TransferList) {\n    return (\n      this.S_T_K.indexOf(data[this.dataKey]) === -1 &&\n      data.label.indexOf(this.leftFilterName) !== -1\n    );\n  }\n\n  // 判断未禁用\n  private notDisabled({ disabled, _disabled }: TransferList) {\n    return !disabled && !_disabled;\n  }\n}\n\ninterface TransferList {\n  label: string;\n  key?: string;\n  _checked: boolean; // 是否选中\n  _disabled: boolean; // 是否禁用\n  disabled?: boolean; // 外部数据禁用\n  [i: string]: any;\n}\n<\/script>']},media:void 0})}),Me,"data-v-6e1a65c5",!1,void 0,!1,N,void 0,void 0),Fe={VClusterizeList:He,VMultipleSelect:le,VTransferBox:Ie},Ke={install:function(e){Object.keys(Fe).forEach((function(t){e.component(t,Fe[t])}))}};export default Ke;export{He as VClusterizeList,le as VMultipleSelect,Ie as VTransferBox};
